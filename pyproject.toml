[build-system]
requires = ["setuptools>=68", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "gwexpy"
version = "0.1.0"
description = "GWpy Expansions for Experiments"
readme = "README.md"
requires-python = ">=3.9"
dependencies = [
  "astropy",
  "gwpy",
  "numpy",
  "pandas",
  "scipy",
]

[project.optional-dependencies]
dev = ["pytest", "pytest-cov", "ruff", "mypy"]
torch = ["torch"]
tensorflow = ["tensorflow"]
jax = ["jax", "jaxlib"]
dask = ["dask"]
zarr = ["zarr"]
audio = ["librosa", "pydub", "torchaudio"]
data = ["xarray", "h5py", "netCDF4", "obspy", "mne", "neo"]
control = ["control"]
gpu = ["cupy"]
geophysics = ["wintools", "win2ndarray", "mth5", "mt_metadata", "mtpy"]
interop = [
    "torch", "tensorflow", "jax", "jaxlib", "dask", "zarr",
    "librosa", "pydub", "torchaudio",
    "xarray", "h5py", "netCDF4", "obspy", "mne", "neo",
    "control", "cupy",
    "wintools", "win2ndarray", "mth5", "mt_metadata", "mtpy"
]
all = [
    "torch", "tensorflow", "jax", "jaxlib", "dask", "zarr",
    "librosa", "pydub", "torchaudio",
    "xarray", "h5py", "netCDF4", "obspy", "mne", "neo",
    "control", "cupy",
    "wintools", "win2ndarray", "mth5", "mt_metadata", "mtpy"
]

[tool.setuptools.packages.find]
where = ["."]
include = ["gwexpy*"]

[tool.setuptools.package-data]
gwexpy = ["py.typed"]

[tool.pytest.ini_options]
addopts = ["-ra"]
pythonpath = ["."]
markers = [
    "freeze_time: Freeze time for testing",
    "cvmfs: Requires CVMFS available",
    "requires: Conditional dependency checks",
    "remote: Requires network access",
]

[tool.mypy]
python_version = "3.9"
ignore_missing_imports = true
show_error_codes = true
warn_unused_ignores = true

[tool.coverage.run]
branch = true
source = ["gwexpy"]
omit = [
    "gwexpy/**/tests/*",
    "tests/*",
]

[tool.coverage.report]
show_missing = true
skip_covered = true
fail_under = 70
