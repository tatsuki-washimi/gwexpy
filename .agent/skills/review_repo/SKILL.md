---
name: review_repo
description: リポジトリ全体を構造、コード品質、テスト、ドキュメントの観点から体系的にレビューし、優先度付きの改善レポートを生成する
---

# Review Repository

リポジトリ全体の品質と構造を評価し、改善のロードマップを作成します。

## 手順

1.  **ディレクトリ構造の把握**:
    *   `list_dir` を使用して、プロジェクトの全体像（`gwexpy`, `tests`, `docs`, `examples` など）を確認する。
    *   `find_by_name` で主要なファイル形式（`.py`, `.ipynb`, `.md`, `.toml`）の分布を確認する。

2.  **設計・依存関係の確認**:
    *   `README.md` を読み、プロジェクトの目的と主要機能を理解する。
    *   `pyproject.toml` や `setup.py` を確認し、依存関係とビルド設定を把握する。

3.  **コード品質のスクリーニング**:
    *   `grep_search` で以下のアンチパターンや残存項目を検索する：
        *   `except Exception:` (広範すぎる例外キャッチ)
        *   `pass` (空のブロック)
        *   `TODO`, `FIXME`, `XXX`
        *   古いPythonバージョンへの対応コード (`sys.version_info`)
    *   `view_file_outline` で主要クラスのメソッドが型ヒントや docstring を持っているか確認する。

4.  **テスト・品質管理の検証**:
    *   `run_tests` スキルや `run_command` (`pytest --collect-only`) でテストの規模と状態を確認する。
    *   GitHub Actions (`.github/workflows`) などのCI設定を確認する。

5.  **レポートの生成とタスク化**:
    *   以下のセクションを含むレポートを作成する：
        *   **概要**: プロジェクトの規模と現在の状態。
        *   **長所**: 良い実装や設計のポイント。
        *   **改善点 (P1:高, P2:中, P3:低)**: 優先度順に整理された具体的な問題点。
    *   レポートを元に、AIが理解しやすい「改善タスク用プロンプト」を `.agent/` ディレクトリにマークダウン形式で保存する。
