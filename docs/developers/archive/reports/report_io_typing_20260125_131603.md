---
title: "Phase 2 Step 3: IO Typing Hardening"
date: 2026-01-25T13:16:03Z
models:
  - Codex (GPT-5)
duration: "â‰ˆ1h"
description: |
  Removed MyPy ignore for gwexpy.io, resolved IO typing errors, and
  validated with mypy/ruff/pytest. Updated mixin typing to align
  with IndexLike and ensured optional dependencies remain guarded.
---

# Summary

- Removed the `gwexpy.io.*` MyPy override from `pyproject.toml` and fixed
  IO typing issues so `mypy gwexpy/io` and `mypy .` pass.
- Updated `apply_unit` to use a typed tuple of SeriesMatrix types and a
  `cast` to satisfy MyPy for metadata edits without changing runtime logic.
- Tightened `SeriesMatrixIOMixin` annotations to use `IndexLike` and
  aligned `shape3D` return type with the core mixin.
- Applied Ruff fixes required by the expanded typing checks, including
  import organization and modern typing syntax updates.
- Adjusted the scalar field verification script to guard axis access
  safely when axis indices may be `None`.

# Modified Files

- `pyproject.toml`
- `gwexpy/io/utils.py`
- `gwexpy/types/series_matrix_io.py`
- `gwexpy/fields/scalar.py`
- `gwexpy/types/metadata.py`
- `gwexpy/types/typing.py`
- `scripts/verify_scalarfield_physics.py`

# Verification

- `mypy gwexpy/io`
- `mypy .`
- `ruff check .`
- `pytest tests/io`

# Notes

- `tests/io` completed with expected skips; joblib fell back to serial mode
  due to permissions (warning only).
