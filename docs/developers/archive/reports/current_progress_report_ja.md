# LIGO DTT diaggui 模倣 GUI (pyaggui) 進捗レポート

## 1. 概要
`gwexpy/gui/pyaggui.py` を中心としたGUIアプリケーションは、LIGOの診断ツール "DTT (Diagnostic Test Tools)" の `diaggui` のインターフェースを忠実に再現しようとしています。
現在、基本的なUIフレームワークの構築が完了し、`gwexpy` (および `gwpy`) をバックエンドとしたスペクトル解析機能の一部が動作するプロトタイプ段階です。

## 2. 実装済み機能

### 2.1 UI / レイアウト
*   **メイン構造**: Input, Measurement, Excitation, Result の4タブ構成が再現されています。
*   **Resultタブ**:
    *   **2段構成のタブコントロール**: DTT特有の、「Result」画面左側にある操作パネルが、2段組みのタブ（Row 1: Style, X-axis... / Row 2: Traces, Range...）として実装されています。
    *   **グラフ表示**: 上下に2つの `pyqtgraph` プロットウィジェット（Graph 1, Graph 2）が配置され、それぞれ独立して制御可能です。
    *   **トレース制御**: 8本（0-7）のトレースごとに、Channel A/Bの選択、線の色・スタイル・太さ、シンボル、バーグラフの切り替えが可能です。
    *   **軸制御**: X軸・Y軸それぞれの リニア/対数 切り替え、Auto/Manual レンジ設定が実装されています。

### 2.2 バックエンド (Engine)
*   **スペクトル解析**: `gwexpy.timeseries.TimeSeries` を使用し、以下の計算が実装されています。
    *   Time Series (時系列)
    *   Amplitude Spectral Density (ASD)
    *   Cross Spectral Density (CSD)
    *   Coherence / Squared Coherence
    *   Transfer Function
*   **データソース**: 現在は `update_graphs` 内でサイン波、ノイズ、ビート信号などのダミーデータをリアルタイム生成し、それを解析して表示しています。

## 3. 未実装・課題・次のステップ

### 3.1 機能面
*   **Spectrogram (スペクトログラム)**: UI上の選択肢にはありますが、バックエンド (`engine.py`) が `None` を返すため、まだ描画されません。
*   **ファイル I/O**: Import/Export/Save/Restore ボタンは配置されていますが、実際のファイル読み書き処理は実装されていません。
*   **単位 (Units) / カーソル (Cursor)**: UIは存在しますが、ロジック（単位変換やカーソル値の読み取り・表示）はまだ完全に統合されていないか、プレースホルダーです。
*   **Measurement 設定**: Window関数や平均化タイプの設定UIはあり、Engineにパラメータとしては渡されていますが、すべての設定が厳密に反映されているかの検証が必要です（特にOverlapの単位処理など）。

### 3.2 構造面
*   **データフロー**: 現在はGUIスレッド内でデータ生成を行っていますが、将来的には外部入力や別スレッドでのデータ取得が必要になる可能性があります。

## 4. 結論
UIの再現度は非常に高く、DTTユーザーにとって馴染み深い操作感が構築されています。
次の主要なマイルストーンは、**スペクトログラムの実装** と **実データ（またはファイル）からの読み込み機能** の追加となるでしょう。
